%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%   EVENT REPORT MACROS
%   Updated for Arabic Pagination and Conditional Front Matter
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% --- Mode Detection ---
\newif\ifstandalone
\ifdefined\annualreportmode
    \standalonefalse
\else
    \standalonetrue
\fi

% --- Metadata Placeholder Definitions ---
% These are default values. Reports will override these using \renewcommand.
\renewcommand{\reporttopic}{Event Name/Title Goes Here}
\renewcommand{\reportdate}{DD/MM/YYYY}
\renewcommand{\reportvenue}{AISSMS Institute of Information Technology}
\renewcommand{\reportorganizer}{AISSMS IOIT ACM Student Chapter}
\renewcommand{\eventhead}{Name of Event head}
\renewcommand{\reportauthor}{Report Author Name}
\renewcommand{\submissiondate}{DD/MM/YYYY}
\renewcommand{\reportcollaboration}{} % Add if needed

% --- Section Reset Logic for Annual Report ---
\newcounter{annualtempsection}
\newcounter{eventcount}

\newcommand{\includeevent}[1]{%
    \stepcounter{eventcount}%
    \setcounter{annualtempsection}{\value{section}}
    \setcounter{section}{0}
    \renewcommand{\theHsection}{event.\theeventcount.\arabic{section}}
    \input{#1}
    \setcounter{section}{\value{annualtempsection}}
    \renewcommand{\theHsection}{\arabic{section}}
}

% --- Custom Title Page Command ---
\newcommand{\makecustomtitle}{%
\ifstandalone
    \begin{titlepage}
    \thispagestyle{empty}
\else
    \clearpage
    \thispagestyle{fancy} % Standard header for annual report pages
\fi

    \centering
    \noindent
    \makebox[0.32\textwidth][l]{\includegraphics[height=2.4cm]{acm-logo.png}}%
    \makebox[0.36\textwidth][c]{\includegraphics[height=2.3cm]{college-logo.png}}%
    \makebox[0.32\textwidth][r]{}
    \vspace{2.5cm}

    {\Large \textbf{AISSMS IOIT ACM Student Chapter Event Report}}\\[0.5cm]
    {\Huge \bfseries \reporttopic}\\
    \vfill

    \begin{flushleft}
    \large
    \begin{tabular}{@{}l@{\quad}l}
    \textbf{EVENT DATE:} & \reportdate \\
    \textbf{VENUE:} & \reportvenue \\
    \textbf{ORGANIZED BY:} & \reportorganizer \\
    \ifx\reportcollaboration\empty\else
    \textbf{IN COLLABORATION WITH:} & \reportcollaboration \\
    \fi
    \textbf{Event Head:} & \eventhead \\
    \end{tabular}
    \end{flushleft}
    \vfill

\ifstandalone
    \end{titlepage}
\fi
}

% --- Conditional Front Matter (USE ARABIC EVERYWHERE) ---
\newcommand{\makeconditionalfrontmatter}{%
\ifstandalone
    % Only show these in individual reports
    \pagenumbering{arabic}
    \tableofcontents
    \listoffigures
    \clearpage
\else
    % In Annual Report mode: Do not show TOC, LOF, or LOT.
    % Pagination remains continuous Arabic from the master doc.
\fi
}

% --- Conditional Submission Block ---
\newcommand{\makesubmissionblock}{%
\ifstandalone
\vfill
\begin{flushleft}
    \large
    \textbf{REPORT SUBMITTED BY:} \\
    \vspace{0.5cm}
    \reportauthor \\
    AISSMS IOIT ACM Student Chapter \\
    \vspace{2cm}
    \rule{8cm}{0.4pt} \\
    (Signature) \\
    \vspace{1cm}
    \textbf{Date:} \submissiondate
\end{flushleft}
\fi
}
